"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[306],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return N}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),o=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=o(e.components);return a.createElement(d.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},s=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),s=o(n),N=r,c=s["".concat(d,".").concat(N)]||s[N]||k[N]||i;return n?a.createElement(c,l(l({ref:t},m),{},{components:n})):a.createElement(c,l({ref:t},m))}));function N(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=s;var p={};for(var d in t)hasOwnProperty.call(t,d)&&(p[d]=t[d]);p.originalType=e,p.mdxType="string"==typeof e?e:r,l[1]=p;for(var o=2;o<i;o++)l[o]=n[o];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},4440:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return d},default:function(){return N},frontMatter:function(){return p},metadata:function(){return o},toc:function(){return k}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),l=["components"],p={id:"modules",title:"protocat",sidebar_label:"Exports",sidebar_position:.5,custom_edit_url:null},d=void 0,o={unversionedId:"api/modules",id:"api/modules",title:"protocat",description:"Enumerations",source:"@site/docs/api/modules.md",sourceDirName:"api",slug:"/api/modules",permalink:"/docs/api/modules",draft:!1,editUrl:null,tags:[],version:"current",sidebarPosition:.5,frontMatter:{id:"modules",title:"protocat",sidebar_label:"Exports",sidebar_position:.5,custom_edit_url:null}},m={},k=[{value:"Enumerations",id:"enumerations",level:2},{value:"Classes",id:"classes",level:2},{value:"Interfaces",id:"interfaces",level:2},{value:"Type aliases",id:"type-aliases",level:2},{value:"Middleware",id:"middleware",level:3},{value:"Type parameters",id:"type-parameters",level:4},{value:"Type declaration",id:"type-declaration",level:4},{value:"Parameters",id:"parameters",level:5},{value:"Returns",id:"returns",level:5},{value:"Defined in",id:"defined-in",level:4},{value:"ProtoCatCall",id:"protocatcall",level:3},{value:"Type parameters",id:"type-parameters-1",level:4},{value:"Defined in",id:"defined-in-1",level:4},{value:"ServiceImplementation",id:"serviceimplementation",level:3},{value:"Type parameters",id:"type-parameters-2",level:4},{value:"Defined in",id:"defined-in-2",level:4},{value:"Functions",id:"functions",level:2},{value:"accessLogInterceptor",id:"accessloginterceptor",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-1",level:4},{value:"Defined in",id:"defined-in-3",level:4},{value:"createCache",id:"createcache",level:3},{value:"Type parameters",id:"type-parameters-3",level:4},{value:"Parameters",id:"parameters-2",level:4},{value:"Returns",id:"returns-2",level:4},{value:"Defined in",id:"defined-in-4",level:4},{value:"createClient",id:"createclient",level:3},{value:"Type parameters",id:"type-parameters-4",level:4},{value:"Parameters",id:"parameters-3",level:4},{value:"Returns",id:"returns-3",level:4},{value:"Defined in",id:"defined-in-5",level:4},{value:"metadataInterceptor",id:"metadatainterceptor",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"Returns",id:"returns-4",level:4},{value:"Defined in",id:"defined-in-6",level:4},{value:"onError",id:"onerror",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"Returns",id:"returns-5",level:4},{value:"Defined in",id:"defined-in-7",level:4}],s={toc:k};function N(e){var t=e.components,n=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"enumerations"},"Enumerations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/api/enums/CallType"},"CallType"))),(0,i.kt)("h2",{id:"classes"},"Classes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/api/classes/ProtoCat"},"ProtoCat"))),(0,i.kt)("h2",{id:"interfaces"},"Interfaces"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/api/interfaces/CacheImplementation"},"CacheImplementation"))),(0,i.kt)("h2",{id:"type-aliases"},"Type aliases"),(0,i.kt)("h3",{id:"middleware"},"Middleware"),(0,i.kt)("p",null,"\u01ac ",(0,i.kt)("strong",{parentName:"p"},"Middleware"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Extension"),">",": (",(0,i.kt)("inlineCode",{parentName:"p"},"call"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"ProtoCatAnyCall"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Extension"),">",", ",(0,i.kt)("inlineCode",{parentName:"p"},"next"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"NextFn"),") => ",(0,i.kt)("inlineCode",{parentName:"p"},"any")),(0,i.kt)("h4",{id:"type-parameters"},"Type parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Extension")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"unknown"))))),(0,i.kt)("h4",{id:"type-declaration"},"Type declaration"),(0,i.kt)("p",null,"\u25b8 (",(0,i.kt)("inlineCode",{parentName:"p"},"call"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"next"),"): ",(0,i.kt)("inlineCode",{parentName:"p"},"any")),(0,i.kt)("p",null,"Application generic middleware"),(0,i.kt)("h5",{id:"parameters"},"Parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"call")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"ProtoCatAnyCall"),"<",(0,i.kt)("inlineCode",{parentName:"td"},"Extension"),">")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"next")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"NextFn"))))),(0,i.kt)("h5",{id:"returns"},"Returns"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"any")),(0,i.kt)("h4",{id:"defined-in"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/server/call.ts#L78"},"lib/server/call.ts:78")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"protocatcall"},"ProtoCatCall"),(0,i.kt)("p",null,"\u01ac ",(0,i.kt)("strong",{parentName:"p"},"ProtoCatCall"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Extension"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Req"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Type"),">",": { ",(0,i.kt)("inlineCode",{parentName:"p"},"bufferedResponse?"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Buffer")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"initialMetadata"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc.Metadata")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"meta"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Record"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"string"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"string"),">"," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"metadata"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc.Metadata")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"method"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"package"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"path"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"request?"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Req")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"response?"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Res")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"responseSerialize"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Serialize"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),">"," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"service"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"trailingMetadata"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc.Metadata")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"type"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Type")," ; ",(0,i.kt)("inlineCode",{parentName:"p"},"flushInitialMetadata"),": () => ",(0,i.kt)("inlineCode",{parentName:"p"},"void"),"  } & ",(0,i.kt)("inlineCode",{parentName:"p"},"Extension")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"Type")," extends ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/enums/CallType#unary"},(0,i.kt)("inlineCode",{parentName:"a"},"Unary"))," ? ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc.ServerUnaryCall"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Req"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),">"," & { ",(0,i.kt)("inlineCode",{parentName:"p"},"response"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),"  } : ",(0,i.kt)("inlineCode",{parentName:"p"},"unknown")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"Type")," extends ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/enums/CallType#clientstream"},(0,i.kt)("inlineCode",{parentName:"a"},"ClientStream"))," ? ",(0,i.kt)("inlineCode",{parentName:"p"},"TypedOnData"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"grpc.ServerReadableStream"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Req"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),">",", ",(0,i.kt)("inlineCode",{parentName:"p"},"Req"),">"," & { ",(0,i.kt)("inlineCode",{parentName:"p"},"response"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),"  } : ",(0,i.kt)("inlineCode",{parentName:"p"},"unknown")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"Type")," extends ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/enums/CallType#serverstream"},(0,i.kt)("inlineCode",{parentName:"a"},"ServerStream"))," ? ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc.ServerWritableStream"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Req"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),">"," : ",(0,i.kt)("inlineCode",{parentName:"p"},"unknown")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"Type")," extends ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/enums/CallType#bidi"},(0,i.kt)("inlineCode",{parentName:"a"},"Bidi"))," ? ",(0,i.kt)("inlineCode",{parentName:"p"},"TypedOnData"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"grpc.ServerDuplexStream"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"Req"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Res"),">",", ",(0,i.kt)("inlineCode",{parentName:"p"},"Req"),">"," : ",(0,i.kt)("inlineCode",{parentName:"p"},"unknown")),(0,i.kt)("p",null,"Extended gRPC call"),(0,i.kt)("h4",{id:"type-parameters-1"},"Type parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Extension")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"unknown"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Req")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Message"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Res")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Message"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Type")),(0,i.kt)("td",{parentName:"tr",align:"left"},"extends ",(0,i.kt)("a",{parentName:"td",href:"/docs/api/enums/CallType"},(0,i.kt)("inlineCode",{parentName:"a"},"CallType"))," = ",(0,i.kt)("a",{parentName:"td",href:"/docs/api/enums/CallType"},(0,i.kt)("inlineCode",{parentName:"a"},"CallType")))))),(0,i.kt)("h4",{id:"defined-in-1"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/server/call.ts#L10"},"lib/server/call.ts:10")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"serviceimplementation"},"ServiceImplementation"),(0,i.kt)("p",null,"\u01ac ",(0,i.kt)("strong",{parentName:"p"},"ServiceImplementation"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"T"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Extension"),">",": ",(0,i.kt)("inlineCode",{parentName:"p"},"RemoveIdxSgn"),"<{ ","[M in keyof T]",": MethodDef2ServiceHandler<T","[M]",", Extension",">"," }",">"),(0,i.kt)("p",null,"Create service handler type for whole client definition."),(0,i.kt)("p",null,"Useful for better code-splitting"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"const unaryHandler: ServiceImplementation<\n  IGreetingService,\n  MyContext\n>['unary'] = call => call.uid\n")),(0,i.kt)("h4",{id:"type-parameters-2"},"Type parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"T")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"T"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Extension")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"unknown"))))),(0,i.kt)("h4",{id:"defined-in-2"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/server/call.ts#L118"},"lib/server/call.ts:118")),(0,i.kt)("h2",{id:"functions"},"Functions"),(0,i.kt)("h3",{id:"accessloginterceptor"},"accessLogInterceptor"),(0,i.kt)("p",null,"\u25b8 ",(0,i.kt)("strong",{parentName:"p"},"accessLogInterceptor"),"(",(0,i.kt)("inlineCode",{parentName:"p"},"fn"),"): ",(0,i.kt)("inlineCode",{parentName:"p"},"Interceptor")),(0,i.kt)("h4",{id:"parameters-1"},"Parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"fn")),(0,i.kt)("td",{parentName:"tr",align:"left"},"(",(0,i.kt)("inlineCode",{parentName:"td"},"context"),": { ",(0,i.kt)("inlineCode",{parentName:"td"},"metadata"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"Metadata")," ; ",(0,i.kt)("inlineCode",{parentName:"td"},"options"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"InterceptorOptions"),"  }, ",(0,i.kt)("inlineCode",{parentName:"td"},"next"),": () => ",(0,i.kt)("inlineCode",{parentName:"td"},"Promise"),"<",(0,i.kt)("inlineCode",{parentName:"td"},"StatusObject"),">",") => ",(0,i.kt)("inlineCode",{parentName:"td"},"any"))))),(0,i.kt)("h4",{id:"returns-1"},"Returns"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Interceptor")),(0,i.kt)("h4",{id:"defined-in-3"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/client/interceptors/access-log-interceptor.ts#L3"},"lib/client/interceptors/access-log-interceptor.ts:3")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"createcache"},"createCache"),(0,i.kt)("p",null,"\u25b8 ",(0,i.kt)("strong",{parentName:"p"},"createCache"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"E"),">","(",(0,i.kt)("inlineCode",{parentName:"p"},"cache"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"cb?"),"): ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/modules#middleware"},(0,i.kt)("inlineCode",{parentName:"a"},"Middleware")),"<",(0,i.kt)("inlineCode",{parentName:"p"},"E"),">"),(0,i.kt)("h4",{id:"type-parameters-3"},"Type parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"E")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"unknown"))))),(0,i.kt)("h4",{id:"parameters-2"},"Parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"cache")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("a",{parentName:"td",href:"/docs/api/interfaces/CacheImplementation"},(0,i.kt)("inlineCode",{parentName:"a"},"CacheImplementation")),"<",(0,i.kt)("inlineCode",{parentName:"td"},"E"),">")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"cb?")),(0,i.kt)("td",{parentName:"tr",align:"left"},"(",(0,i.kt)("inlineCode",{parentName:"td"},"call"),": ",(0,i.kt)("a",{parentName:"td",href:"/docs/api/modules#protocatcall"},(0,i.kt)("inlineCode",{parentName:"a"},"ProtoCatCall")),"<",(0,i.kt)("inlineCode",{parentName:"td"},"E"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"Message"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"Message"),", ",(0,i.kt)("a",{parentName:"td",href:"/docs/api/enums/CallType#unary"},(0,i.kt)("inlineCode",{parentName:"a"},"Unary")),">",", ",(0,i.kt)("inlineCode",{parentName:"td"},"hit"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"boolean"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"hash"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"string"),") => ",(0,i.kt)("inlineCode",{parentName:"td"},"any"))))),(0,i.kt)("h4",{id:"returns-2"},"Returns"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/api/modules#middleware"},(0,i.kt)("inlineCode",{parentName:"a"},"Middleware")),"<",(0,i.kt)("inlineCode",{parentName:"p"},"E"),">"),(0,i.kt)("h4",{id:"defined-in-4"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/server/middleware/cache.ts#L27"},"lib/server/middleware/cache.ts:27")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"createclient"},"createClient"),(0,i.kt)("p",null,"\u25b8 ",(0,i.kt)("strong",{parentName:"p"},"createClient"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"D"),">","(",(0,i.kt)("inlineCode",{parentName:"p"},"clientDef"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"address"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"creds?"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"options?"),"): ",(0,i.kt)("inlineCode",{parentName:"p"},"D")," extends (...",(0,i.kt)("inlineCode",{parentName:"p"},"args"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"any"),"[]) => ",(0,i.kt)("inlineCode",{parentName:"p"},"C")," ? ",(0,i.kt)("inlineCode",{parentName:"p"},"UpdatedClient_"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"C"),">"," : { ","[K in string ","|"," number ","|"," symbol]",": D","[K]"," extends Function ? UpdatedClient","_","<C","_",">"," : never }"),(0,i.kt)("h4",{id:"type-parameters-4"},"Type parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"D")),(0,i.kt)("td",{parentName:"tr",align:"left"},"extends ",(0,i.kt)("inlineCode",{parentName:"td"},"Record"),"<",(0,i.kt)("inlineCode",{parentName:"td"},"string"),", (...",(0,i.kt)("inlineCode",{parentName:"td"},"args"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"any"),"[]) => ",(0,i.kt)("inlineCode",{parentName:"td"},"Client"),">"," ","|"," (...",(0,i.kt)("inlineCode",{parentName:"td"},"args"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"any"),"[]) => ",(0,i.kt)("inlineCode",{parentName:"td"},"Client"))))),(0,i.kt)("h4",{id:"parameters-3"},"Parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"clientDef")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"D"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"address")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"string"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"creds?")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"ChannelCredentials"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"options?")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"Partial"),"<",(0,i.kt)("inlineCode",{parentName:"td"},"ClientOptions"),">")))),(0,i.kt)("h4",{id:"returns-3"},"Returns"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"D")," extends (...",(0,i.kt)("inlineCode",{parentName:"p"},"args"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"any"),"[]) => ",(0,i.kt)("inlineCode",{parentName:"p"},"C")," ? ",(0,i.kt)("inlineCode",{parentName:"p"},"UpdatedClient_"),"<",(0,i.kt)("inlineCode",{parentName:"p"},"C"),">"," : { ","[K in string ","|"," number ","|"," symbol]",": D","[K]"," extends Function ? UpdatedClient","_","<C","_",">"," : never }"),(0,i.kt)("h4",{id:"defined-in-5"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/client/client.ts#L155"},"lib/client/client.ts:155")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"metadatainterceptor"},"metadataInterceptor"),(0,i.kt)("p",null,"\u25b8 ",(0,i.kt)("strong",{parentName:"p"},"metadataInterceptor"),"(",(0,i.kt)("inlineCode",{parentName:"p"},"fn"),"): ",(0,i.kt)("inlineCode",{parentName:"p"},"Interceptor")),(0,i.kt)("h4",{id:"parameters-4"},"Parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"fn")),(0,i.kt)("td",{parentName:"tr",align:"left"},"(",(0,i.kt)("inlineCode",{parentName:"td"},"metadata"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"Metadata"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"options"),": ",(0,i.kt)("inlineCode",{parentName:"td"},"InterceptorOptions"),") => ",(0,i.kt)("inlineCode",{parentName:"td"},"any"))))),(0,i.kt)("h4",{id:"returns-4"},"Returns"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Interceptor")),(0,i.kt)("h4",{id:"defined-in-6"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/client/interceptors/metadata-interceptor.ts#L3"},"lib/client/interceptors/metadata-interceptor.ts:3")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"onerror"},"onError"),(0,i.kt)("p",null,"\u25b8 ",(0,i.kt)("strong",{parentName:"p"},"onError"),"(",(0,i.kt)("inlineCode",{parentName:"p"},"handler"),"): ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/modules#middleware"},(0,i.kt)("inlineCode",{parentName:"a"},"Middleware")),"<",(0,i.kt)("inlineCode",{parentName:"p"},"unknown"),">"),(0,i.kt)("p",null,"onError creates a ProtoCat middleware that can be used to intercept errors from various origins, either from:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"sync throws (or async rejects) from the following middlewares (or handlers) in the call stack (chain of next functions)"),(0,i.kt)("li",{parentName:"ul"},"error emits on streamed calls")),(0,i.kt)("p",null,"No error is ever send to client"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"app.use(onError(() => {}))\n")),(0,i.kt)("p",null,"Errors are logged and rethrown without stack trace"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"app.use(onError((e, call) => {\n  console.log(e, call)\n  e.stack = undefined\n  throw e\n}))\n")),(0,i.kt)("h4",{id:"parameters-5"},"Parameters"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"handler")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"ErrorHandler")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Custom error handler for re-throwing errors and error emits. Result is awaited.")))),(0,i.kt)("h4",{id:"returns-5"},"Returns"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/api/modules#middleware"},(0,i.kt)("inlineCode",{parentName:"a"},"Middleware")),"<",(0,i.kt)("inlineCode",{parentName:"p"},"unknown"),">"),(0,i.kt)("h4",{id:"defined-in-7"},"Defined in"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/grissius/protocat/blob/c1c44ef/src/lib/server/middleware/on-error.ts#L65"},"lib/server/middleware/on-error.ts:65")))}N.isMDXComponent=!0}}]);